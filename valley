-- Valley Prison Advanced Script Hub v2.0 (JXL Thea Mode)
-- Made for LX63 executor, optimized 2025
-- Features: Silent Aim, Kill Aura, Auto Weapon, ESP, Fly, Speed, Noclip, Auto Pickup, etc.

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Camera = workspace.CurrentCamera

-- UI Library (Rayfield style cyberpunk)
local Rayfield = loadstring(game:HttpGet("https://raw.githubusercontent.com/RobloxLibrary/Rayfield/main/source.lua"))()

local Window = Rayfield:CreateWindow({
    Name = "Valley Prison JXL Hub",
    LoadingTitle = "Loading Valley Prison Hub...",
    LoadingSubtitle = "by JXL Thea | LX63 Optimized",
    ConfigurationSaving = {
       Enabled = true,
       FolderName = "JXLValleyPrison",
       FileName = "Config"
    },
    Discord = {
       Enabled = false,
    },
    KeySystem = false,
})

local CombatTab = Window:CreateTab("Combat", 4483362458)
local VisualTab = Window:CreateTab("Visuals", 4483362458)
local MovementTab = Window:CreateTab("Movement", 4483362458)
local UtilityTab = Window:CreateTab("Utility", 4483362458)

-- Variables
local SilentAimEnabled = false
local SilentAimFOV = 30
local SilentAimSmoothness = 0.2
local KillAuraEnabled = false
local KillAuraRange = 25
local FlyEnabled = false
local FlySpeed = 50
local NoclipEnabled = false

-- Utility Functions

local function getClosestTarget()
    local closestTarget = nil
    local shortestDistance = SilentAimFOV

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            local screenPos, onScreen = Camera:WorldToScreenPoint(player.Character.Head.Position)
            if onScreen then
                local mousePos = Vector2.new(Mouse.X, Mouse.Y)
                local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                if dist < shortestDistance then
                    shortestDistance = dist
                    closestTarget = player
                end
            end
        end
    end
    return closestTarget
end

-- Silent Aim Hook

local mt = getrawmetatable(game)
local oldNamecall = mt.__namecall
setreadonly(mt, false)

mt.__namecall = newcclosure(function(self, ...)
    local args = {...}
    local method = getnamecallmethod()

    if SilentAimEnabled and tostring(method) == "FireServer" then
        if tostring(self) == "ShootEvent" then -- example remote name, replace with actual
            local target = getClosestTarget()
            if target and target.Character and target.Character:FindFirstChild("Head") then
                args[1] = target.Character.Head.Position
                args[2] = target.Character.Head
            end
            return oldNamecall(self, unpack(args))
        end
    end

    return oldNamecall(self, ...)
end)

setreadonly(mt, true)

-- Kill Aura Loop
RunService.RenderStepped:Connect(function()
    if KillAuraEnabled then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local dist = (player.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                if dist <= KillAuraRange then
                    -- Fire remote attack (replace with actual)
                    ReplicatedStorage.Remotes.Attack:FireServer(player.Character.HumanoidRootPart)
                end
            end
        end
    end
end)

-- UI Toggles and Sliders

CombatTab:CreateToggle({
    Name = "Silent Aim",
    CurrentValue = false,
    Flag = "SilentAimToggle",
    Callback = function(value)
        SilentAimEnabled = value
    end,
})

CombatTab:CreateSlider({
    Name = "Silent Aim FOV",
    Min = 5,
    Max = 100,
    Default = 30,
    Flag = "SilentAimFOVSlider",
    Callback = function(value)
        SilentAimFOV = value
    end,
})

CombatTab:CreateToggle({
    Name = "Kill Aura",
    CurrentValue = false,
    Flag = "KillAuraToggle",
    Callback = function(value)
        KillAuraEnabled = value
    end,
})

CombatTab:CreateSlider({
    Name = "Kill Aura Range",
    Min = 5,
    Max = 50,
    Default = 25,
    Flag = "KillAuraRangeSlider",
    Callback = function(value)
        KillAuraRange = value
    end,
})

-- Movement Tab - Fly

MovementTab:CreateToggle({
    Name = "Fly",
    CurrentValue = false,
    Flag = "FlyToggle",
    Callback = function(value)
        FlyEnabled = value
        if FlyEnabled then
            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.Velocity = Vector3.new(0, 0, 0)
            bodyVelocity.MaxForce = Vector3.new(0, 0, 0)
            bodyVelocity.Parent = LocalPlayer.Character.HumanoidRootPart

            local function fly()
                while FlyEnabled and RunService.RenderStepped:Wait() do
                    local direction = Vector3.new()
                    if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                        direction = direction + Camera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                        direction = direction - Camera.CFrame.LookVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                        direction = direction - Camera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                        direction = direction + Camera.CFrame.RightVector
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                        direction = direction + Vector3.new(0, 1, 0)
                    end
                    if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
                        direction = direction - Vector3.new(0, 1, 0)
                    end
                    bodyVelocity.MaxForce = Vector3.new(1e5, 1e5, 1e5)
                    bodyVelocity.Velocity = direction.Unit * FlySpeed
                end
                bodyVelocity:Destroy()
            end

            coroutine.wrap(fly)()
        else
            local bv = LocalPlayer.Character.HumanoidRootPart:FindFirstChildOfClass("BodyVelocity")
            if bv then bv:Destroy() end
        end
    end,
})

MovementTab:CreateSlider({
    Name = "Fly Speed",
    Min = 10,
    Max = 200,
    Default = 50,
    Flag = "FlySpeedSlider",
    Callback = function(value)
        FlySpeed = value
    end,
})

-- (Add more features and toggles similarly...)

-- Auto Update function (basic)
spawn(function()
    while true do
        wait(300) -- every 5 mins
        local success, newScript = pcall(function()
            return game:HttpGet("https://raw.githubusercontent.com/YEYEYEYE1231/Valley-Prison-Roleplay/main/hub.lua")
        end)
        if success and newScript and newScript ~= script.Source then
            loadstring(newScript)()
            break
        end
    end
end)

Rayfield:Notify({
    Title = "Valley Prison JXL Hub",
    Content = "Loaded successfully!",
    Duration = 5,
    Image = 4483362458,
})

-- End of script
